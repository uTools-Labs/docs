"use strict";(self.webpackChunkuTools=self.webpackChunkuTools||[]).push([[148],{388:(n,a,s)=>{s.r(a),s.d(a,{data:()=>e});const e={key:"v-a1b7ab46",path:"/developer/api.html",title:"uTools API",lang:"zh",frontmatter:{},excerpt:"",headers:[{level:2,title:"事件",slug:"事件",children:[{level:3,title:"onPluginReady(callback)",slug:"onpluginready-callback",children:[]},{level:3,title:"onPluginEnter(callback)",slug:"onpluginenter-callback",children:[]},{level:3,title:"onPluginOut(callback)",slug:"onpluginout-callback",children:[]},{level:3,title:"onPluginDetach(callback)",slug:"onplugindetach-callback",children:[]},{level:3,title:"onDbPull(callback)",slug:"ondbpull-callback",children:[]}]},{level:2,title:"窗口交互",slug:"窗口交互",children:[{level:3,title:"hideMainWindow(isRestorePreWindow)",slug:"hidemainwindow-isrestoreprewindow",children:[]},{level:3,title:"showMainWindow()",slug:"showmainwindow",children:[]},{level:3,title:"setExpendHeight(height)",slug:"setexpendheight-height",children:[]},{level:3,title:"setSubInput(onChange, placeholder, isFocus)",slug:"setsubinput-onchange-placeholder-isfocus",children:[]},{level:3,title:"removeSubInput()",slug:"removesubinput",children:[]},{level:3,title:"setSubInputValue(value)",slug:"setsubinputvalue-value",children:[]},{level:3,title:"subInputFocus()",slug:"subinputfocus",children:[]},{level:3,title:"subInputSelect()",slug:"subinputselect",children:[]},{level:3,title:"subInputBlur()",slug:"subinputblur",children:[]},{level:3,title:"outPlugin()",slug:"outplugin",children:[]},{level:3,title:"redirect(label, payload)",slug:"redirect-label-payload",children:[]},{level:3,title:"showOpenDialog(options)",slug:"showopendialog-options",children:[]},{level:3,title:"showSaveDialog(options)",slug:"showsavedialog-options",children:[]},{level:3,title:"findInPage(text, options)",slug:"findinpage-text-options",children:[]},{level:3,title:"stopFindInPage(action)",slug:"stopfindinpage-action",children:[]},{level:3,title:"startDrag(file)",slug:"startdrag-file",children:[]},{level:3,title:"createBrowserWindow(url, options, callback)",slug:"createbrowserwindow-url-options-callback",children:[]},{level:3,title:"isDarkColors()",slug:"isdarkcolors",children:[]}]},{level:2,title:"动态增减功能",slug:"动态增减功能",children:[{level:3,title:"getFeatures()",slug:"getfeatures",children:[]},{level:3,title:"setFeature(feature)",slug:"setfeature-feature",children:[]},{level:3,title:"removeFeature(code)",slug:"removefeature-code",children:[]}]},{level:2,title:"用户",slug:"用户",children:[{level:3,title:"getUser()",slug:"getuser",children:[]},{level:3,title:"fetchUserServerTemporaryToken()",slug:"fetchuserservertemporarytoken",children:[]}]},{level:2,title:"支付",slug:"支付",children:[{level:3,title:"openPayment(options, callback)",slug:"openpayment-options-callback",children:[]},{level:3,title:"fetchUserPayments()",slug:"fetchuserpayments",children:[]}]},{level:2,title:"工具",slug:"工具",children:[{level:3,title:"screenColorPick(callback)",slug:"screencolorpick-callback",children:[]},{level:3,title:"screenCapture(callback)",slug:"screencapture-callback",children:[]}]},{level:2,title:"模拟",slug:"模拟",children:[{level:3,title:"simulateKeyboardTap(key, ...modifier)",slug:"simulatekeyboardtap-key-modifier",children:[]},{level:3,title:"simulateMouseMove(x, y)",slug:"simulatemousemove-x-y",children:[]},{level:3,title:"simulateMouseClick(x, y)",slug:"simulatemouseclick-x-y",children:[]},{level:3,title:"simulateMouseRightClick(x, y)",slug:"simulatemouserightclick-x-y",children:[]},{level:3,title:"simulateMouseDoubleClick(x, y)",slug:"simulatemousedoubleclick-x-y",children:[]}]},{level:2,title:"屏幕",slug:"屏幕",children:[{level:3,title:"getCursorScreenPoint()",slug:"getcursorscreenpoint",children:[]},{level:3,title:"getPrimaryDisplay()",slug:"getprimarydisplay",children:[]},{level:3,title:"getAllDisplays()",slug:"getalldisplays",children:[]},{level:3,title:"getDisplayNearestPoint(point)",slug:"getdisplaynearestpoint-point",children:[]},{level:3,title:"getDisplayMatching(rect)",slug:"getdisplaymatching-rect",children:[]}]},{level:2,title:"复制",slug:"复制",children:[{level:3,title:"copyFile(file)",slug:"copyfile-file",children:[]},{level:3,title:"copyImage(img)",slug:"copyimage-img",children:[]},{level:3,title:"copyText(text)",slug:"copytext-text",children:[]},{level:3,title:"getCopyedFiles()",slug:"getcopyedfiles",children:[]}]},{level:2,title:"系统",slug:"系统",children:[{level:3,title:"showNotification(body, clickFeatureCode)",slug:"shownotification-body-clickfeaturecode",children:[]},{level:3,title:"shellOpenPath(fullPath)",slug:"shellopenpath-fullpath",children:[]},{level:3,title:"shellShowItemInFolder(fullPath)",slug:"shellshowiteminfolder-fullpath",children:[]},{level:3,title:"shellOpenExternal(url)",slug:"shellopenexternal-url",children:[]},{level:3,title:"shellBeep()",slug:"shellbeep",children:[]},{level:3,title:"getNativeId()",slug:"getnativeid",children:[]},{level:3,title:"getAppVersion()",slug:"getappversion",children:[]},{level:3,title:"getPath(name)",slug:"getpath-name",children:[]},{level:3,title:"getFileIcon(filePath)",slug:"getfileicon-filepath",children:[]},{level:3,title:"readCurrentFolderPath()",slug:"readcurrentfolderpath",children:[]},{level:3,title:"readCurrentBrowserUrl()",slug:"readcurrentbrowserurl",children:[]},{level:3,title:"isDev()",slug:"isdev",children:[]},{level:3,title:"isMacOs()",slug:"ismacos",children:[]},{level:3,title:"isWindows()",slug:"iswindows",children:[]},{level:3,title:"isLinux()",slug:"islinux",children:[]}]}],filePathRelative:"developer/api.md"}},9682:(n,a,s)=>{s.r(a),s.d(a,{default:()=>gn});var e=s(6252);const t=(0,e.uE)('<h1 id="utools-api" tabindex="-1"><a class="header-anchor" href="#utools-api" aria-hidden="true">#</a> uTools API</h1><p>在插件初始化完成时，uTools 会自动在你的 window 对象上挂载 utools 对象，它将提供一些特有的 api，使你的插件能够更好的与uTools 主窗口沟通，并获得一些有意义的底层能力。</p><h2 id="事件" tabindex="-1"><a class="header-anchor" href="#事件" aria-hidden="true">#</a> 事件</h2><p>你可以根据需要，事先定义好一些回调函数，uTools 会在事件产生时主动调用它们。</p><h3 id="onpluginready-callback" tabindex="-1"><a class="header-anchor" href="#onpluginready-callback" aria-hidden="true">#</a> <code>onPluginReady(callback)</code></h3><ul><li><code>callback</code> Function</li></ul><blockquote><p>当插件装载成功，uTools 将会主动调用这个方法（生命周期内仅调用一次），所有的 api 都应该在 onPluginReady 之后进行调用。</p></blockquote><h4 id="示例" tabindex="-1"><a class="header-anchor" href="#示例" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">onPluginReady</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;插件装配完成，已准备好&#39;</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="onpluginenter-callback" tabindex="-1"><a class="header-anchor" href="#onpluginenter-callback" aria-hidden="true">#</a> <code>onPluginEnter(callback)</code></h3><ul><li><code>callback</code> Function <ul><li><code>Object</code><ul><li><p><code>code</code> String</p><blockquote><p>plugin.json 配置的 feature.code</p></blockquote></li><li><p><code>type</code> String</p><blockquote><p>plugin.json 配置的 feature.cmd.type，可以为 &quot;text&quot;、&quot;img&quot;、 &quot;files&quot;、 &quot;regex&quot;、 &quot;over&quot;、&quot;window&quot;</p></blockquote></li><li><p><code>payload</code> String | Object | Array</p><blockquote><p>feature.cmd.type 对应匹配的数据</p></blockquote></li></ul></li></ul></li></ul><blockquote><p>每当插件从后台进入到前台时，uTools 将会主动调用这个方法。</p></blockquote><h4 id="示例-1" tabindex="-1"><a class="header-anchor" href="#示例-1" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">onPluginEnter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>code<span class="token punctuation">,</span> type<span class="token punctuation">,</span> payload<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;用户进入插件&#39;</span><span class="token punctuation">,</span> code<span class="token punctuation">,</span> type<span class="token punctuation">,</span> payload<span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n<span class="token comment">/* \ntype 为 &quot;files&quot; 时， payload 值示例\n[\n\t{\n\t\t&quot;isFile&quot;: true,\n\t\t&quot;isDirectory&quot;: false,\n\t\t&quot;name&quot;: &quot;demo.js&quot;,\n\t\t&quot;path&quot;: &quot;C:\\\\demo.js&quot;\n\t}\n]\n\ntype 为 &quot;window&quot; 时， payload 值示例\n{\n\t&quot;id&quot;: 264584,\n\t&quot;class&quot;: &quot;Chrome_WidgetWin_1&quot;,\n\t&quot;title&quot;: &quot;demo&quot;,\n\t&quot;x&quot;: -8,\n\t&quot;y&quot;: -8,\n\t&quot;width&quot;: 1936,\n\t&quot;height&quot;: 1056,\n\t&quot;appPath&quot;: &quot;C:\\\\demo.exe&quot;,\n\t&quot;pid&quot;: 232,\n\t&quot;app&quot;: &quot;demo.exe&quot;\n}\n\ntype 为 &quot;img&quot; 时， payload 值示例\ndata:image/png;base64,...\n\ntype 为 &quot;text&quot;、&quot;regex&quot;、 &quot;over&quot; 时， payload 值为进入插件时的主输入框文本\n*/</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="onpluginout-callback" tabindex="-1"><a class="header-anchor" href="#onpluginout-callback" aria-hidden="true">#</a> <code>onPluginOut(callback)</code></h3><ul><li><code>callback</code> Function</li></ul><blockquote><p>每当插件从前台进入到后台时，uTools 将会主动调用这个方法。</p></blockquote><h4 id="示例-2" tabindex="-1"><a class="header-anchor" href="#示例-2" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">onPluginOut</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;用户退出插件&#39;</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="onplugindetach-callback" tabindex="-1"><a class="header-anchor" href="#onplugindetach-callback" aria-hidden="true">#</a> <code>onPluginDetach(callback)</code></h3><ul><li><code>callback</code> Function</li></ul><blockquote><p>用户对插件进行分离操作时，uTools 将会主动调用这个方法。</p></blockquote><h4 id="示例-3" tabindex="-1"><a class="header-anchor" href="#示例-3" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">onPluginDetach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;插件被分离&#39;</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="ondbpull-callback" tabindex="-1"><a class="header-anchor" href="#ondbpull-callback" aria-hidden="true">#</a> <code>onDbPull(callback)</code></h3><ul><li><code>callback</code> Function</li></ul><blockquote><p>当此插件的数据在其他设备上被更改后同步到此设备时，uTools 将会主动调用这个方法</p></blockquote><h4 id="示例-4" tabindex="-1"><a class="header-anchor" href="#示例-4" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">onDbPull</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;onDbPull&#39;</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="窗口交互" tabindex="-1"><a class="header-anchor" href="#窗口交互" aria-hidden="true">#</a> 窗口交互</h2><h3 id="hidemainwindow-isrestoreprewindow" tabindex="-1"><a class="header-anchor" href="#hidemainwindow-isrestoreprewindow" aria-hidden="true">#</a> <code>hideMainWindow(isRestorePreWindow)</code></h3><ul><li><p><code>isRestorePreWindow</code> Boolean</p><blockquote><p>是否焦点回归到前面的活动窗口，默认 true</p></blockquote></li><li><p><code>返回</code> Boolean</p></li></ul><blockquote><p>执行该方法将会隐藏 uTools 主窗口，包括此时正在主窗口运行的插件，分离的插件不会被隐藏。</p></blockquote><h4 id="示例-5" tabindex="-1"><a class="header-anchor" href="#示例-5" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">hideMainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="showmainwindow" tabindex="-1"><a class="header-anchor" href="#showmainwindow" aria-hidden="true">#</a> <code>showMainWindow()</code></h3><ul><li><code>返回</code> Boolean</li></ul><blockquote><p>执行该方法将会显示 uTools 主窗口，包括此时正在主窗口运行的插件。</p></blockquote><h4 id="示例-6" tabindex="-1"><a class="header-anchor" href="#示例-6" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">showMainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="setexpendheight-height" tabindex="-1"><a class="header-anchor" href="#setexpendheight-height" aria-hidden="true">#</a> <code>setExpendHeight(height)</code></h3><ul><li><code>height</code> Integer</li><li><code>返回</code> Boolean</li></ul><blockquote><p>执行该方法将会修改插件窗口的高度。</p></blockquote><h4 id="示例-7" tabindex="-1"><a class="header-anchor" href="#示例-7" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">setExpendHeight</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="setsubinput-onchange-placeholder-isfocus" tabindex="-1"><a class="header-anchor" href="#setsubinput-onchange-placeholder-isfocus" aria-hidden="true">#</a> <code>setSubInput(onChange, placeholder, isFocus)</code></h3><ul><li><p><code>onChange</code> Function</p><ul><li><code>Object</code><ul><li><code>text</code> String</li></ul></li></ul><blockquote><p>子输入框文本修改时触发</p></blockquote></li><li><p><code>placeholder</code> String (可选)</p><blockquote><p>子输入框占位符</p></blockquote></li><li><p><code>isFocus</code> Boolean (可选)</p><blockquote><p>子输入框是否获得焦点，默认 true</p></blockquote></li><li><p><code>返回</code> Boolean</p></li></ul><blockquote><p>设置子输入框，进入插件后，原本 uTools 的搜索条主输入框将会变成子输入框，子输入框可以为插件所使用。</p></blockquote><p><img src="https://res.u-tools.cn/website/main.png" alt="main.png"></p><p align="center">主输入框</p> ![main.png](https://res.u-tools.cn/website/subInput.png) <p align="center">子输入框</p> #### 示例 ```js utools.setSubInput(({ text }) =&gt; { console.log(text) }, &#39;搜索&#39;) ``` <h3 id="removesubinput" tabindex="-1"><a class="header-anchor" href="#removesubinput" aria-hidden="true">#</a> <code>removeSubInput()</code></h3><ul><li><code>返回</code> Boolean</li></ul><blockquote><p>移除已经设置的子输入框，在插件切换到其他页面时可以重新设置子输入框为其所用。</p></blockquote><h4 id="示例-8" tabindex="-1"><a class="header-anchor" href="#示例-8" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">removeSubInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="setsubinputvalue-value" tabindex="-1"><a class="header-anchor" href="#setsubinputvalue-value" aria-hidden="true">#</a> <code>setSubInputValue(value)</code></h3><ul><li><code>value</code> String</li><li><code>返回</code> Boolean</li></ul><blockquote><p>直接对子输入框的值进行设置。</p></blockquote><h4 id="示例-9" tabindex="-1"><a class="header-anchor" href="#示例-9" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">setSubInputValue</span><span class="token punctuation">(</span><span class="token string">&#39;uTools&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="subinputfocus" tabindex="-1"><a class="header-anchor" href="#subinputfocus" aria-hidden="true">#</a> <code>subInputFocus()</code></h3><ul><li><code>返回</code> Boolean</li></ul><blockquote><p>子输入框获得焦点</p></blockquote><h4 id="示例-10" tabindex="-1"><a class="header-anchor" href="#示例-10" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">subInputFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="subinputselect" tabindex="-1"><a class="header-anchor" href="#subinputselect" aria-hidden="true">#</a> <code>subInputSelect()</code></h3><ul><li><code>返回</code> Boolean</li></ul><blockquote><p>子输入框获得焦点并选中</p></blockquote><h4 id="示例-11" tabindex="-1"><a class="header-anchor" href="#示例-11" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">subInputSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="subinputblur" tabindex="-1"><a class="header-anchor" href="#subinputblur" aria-hidden="true">#</a> <code>subInputBlur()</code></h3><ul><li><code>返回</code> Boolean</li></ul><blockquote><p>子输入框失去焦点，插件获得焦点</p></blockquote><h4 id="示例-12" tabindex="-1"><a class="header-anchor" href="#示例-12" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">subInputBlur</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="outplugin" tabindex="-1"><a class="header-anchor" href="#outplugin" aria-hidden="true">#</a> <code>outPlugin()</code></h3><ul><li><code>返回</code> Boolean</li></ul><blockquote><p>执行该方法将会退出当前插件。（插件进入后台，进程并未结束）</p></blockquote><h4 id="示例-13" tabindex="-1"><a class="header-anchor" href="#示例-13" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">outPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="redirect-label-payload" tabindex="-1"><a class="header-anchor" href="#redirect-label-payload" aria-hidden="true">#</a> <code>redirect(label, payload)</code></h3><ul><li><p><code>label</code> String</p><blockquote><p>feature.cmd.label 名称</p></blockquote></li><li><p><code>payload</code> String | Object</p><blockquote><p>feature.cmd.type 对应的数据</p></blockquote></li><li><p><code>返回</code> Boolean</p></li></ul><blockquote><p>该方法可以携带数据，跳转到另一个插件进行处理，如果用户未安装对应的插件，uTools 会弹出提醒并引导进入插件市场下载。</p></blockquote><h4 id="示例-14" tabindex="-1"><a class="header-anchor" href="#示例-14" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//content 为string类型</span>\nutools<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&#39;翻译&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;hello world&#39;</span><span class="token punctuation">)</span>\n\n<span class="token comment">//content 为object类型</span>\nutools<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&#39;翻译&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n\t<span class="token string">&#39;type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text&#39;</span><span class="token punctuation">,</span>\n\t<span class="token string">&#39;data&#39;</span><span class="token operator">:</span> <span class="token string">&#39;hello world&#39;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n<span class="token comment">//传递图片</span>\nutools<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&#39;图片识别&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n\t<span class="token string">&#39;type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;img&#39;</span><span class="token punctuation">,</span>\n\t<span class="token comment">// data 可以是本地图片路径、base64编码的图片、Buffer对象</span>\n\t<span class="token string">&#39;data&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/path/to/img.jpg(支持jpeg|png|bmp)&#39;</span> <span class="token comment">//filePath、base64、Buffer</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n<span class="token comment">//传递文件、文件夹</span>\nutools<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&#39;图片压缩&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n\t<span class="token string">&#39;type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;files&#39;</span><span class="token punctuation">,</span>\n\t<span class="token comment">// data 可以是本地文件、文件夹路径</span>\n\t<span class="token string">&#39;data&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/path/to/img.jpg&#39;</span> <span class="token comment">//filePath、array</span>\n\t<span class="token comment">//&#39;data&#39;: [&#39;path1&#39;, &#39;path2&#39;] //支持数组</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="showopendialog-options" tabindex="-1"><a class="header-anchor" href="#showopendialog-options" aria-hidden="true">#</a> <code>showOpenDialog(options)</code></h3>',89),o=(0,e._)("p",null,[(0,e._)("code",null,"options"),(0,e.Uk)(" Object")],-1),l=(0,e.Uk)("与 "),p={href:"https://www.electronjs.org/docs/api/dialog#dialogshowopendialogsyncbrowserwindow-options",target:"_blank",rel:"noopener noreferrer"},c=(0,e.Uk)("Electron API dialog.showOpenDialogSync"),i=(0,e.Uk)(" options 一致"),u=(0,e._)("li",null,[(0,e._)("p",null,[(0,e._)("code",null,"返回"),(0,e.Uk)(" Array | undefined")]),(0,e._)("blockquote",null,[(0,e._)("p",null,"返回选择的文件数组，用户取消返回 undefined")])],-1),r=(0,e.uE)('<blockquote><p>弹出文件选择框</p></blockquote><h4 id="示例-15" tabindex="-1"><a class="header-anchor" href="#示例-15" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">showOpenDialog</span><span class="token punctuation">(</span><span class="token punctuation">{</span> \n  filters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token string">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;plugin.json&#39;</span><span class="token punctuation">,</span> extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;json&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> \n  properties<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;openFile&#39;</span><span class="token punctuation">]</span> \n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="showsavedialog-options" tabindex="-1"><a class="header-anchor" href="#showsavedialog-options" aria-hidden="true">#</a> <code>showSaveDialog(options)</code></h3>',4),d=(0,e._)("p",null,[(0,e._)("code",null,"options"),(0,e.Uk)(" Object")],-1),k=(0,e.Uk)("与 "),b={href:"https://www.electronjs.org/docs/api/dialog#dialogshowsavedialogsyncbrowserwindow-options",target:"_blank",rel:"noopener noreferrer"},h=(0,e.Uk)("Electron API dialog.showSaveDialogSync"),g=(0,e.Uk)(" options 一致"),m=(0,e._)("li",null,[(0,e._)("p",null,[(0,e._)("code",null,"返回"),(0,e.Uk)(" String | undefined")]),(0,e._)("blockquote",null,[(0,e._)("p",null,"返回选择的路径，用户取消返回 undefined")])],-1),v=(0,e.uE)('<blockquote><p>弹出文件保存框</p></blockquote><h4 id="示例-16" tabindex="-1"><a class="header-anchor" href="#示例-16" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">showSaveDialog</span><span class="token punctuation">(</span><span class="token punctuation">{</span> \n  title<span class="token operator">:</span> <span class="token string">&#39;保存位置&#39;</span><span class="token punctuation">,</span> \n  defaultPath<span class="token operator">:</span> utools<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token string">&#39;downloads&#39;</span><span class="token punctuation">)</span>\n  buttonLabel<span class="token operator">:</span> <span class="token string">&#39;保存&#39;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="findinpage-text-options" tabindex="-1"><a class="header-anchor" href="#findinpage-text-options" aria-hidden="true">#</a> <code>findInPage(text, options)</code></h3>',4),f=(0,e._)("li",null,[(0,e._)("p",null,[(0,e._)("code",null,"text"),(0,e.Uk)(" String")]),(0,e._)("blockquote",null,[(0,e._)("p",null,"要搜索的内容(必填)")])],-1),x=(0,e._)("p",null,[(0,e._)("code",null,"options"),(0,e.Uk)(" Object (可选)")],-1),q=(0,e.Uk)("与 "),j={href:"https://www.electronjs.org/docs/api/web-contents#contentsfindinpagetext-options",target:"_blank",rel:"noopener noreferrer"},y=(0,e.Uk)("Electron API contentsfindinpagetext-options"),w=(0,e.Uk)(" options 一致"),_=(0,e.uE)('<blockquote><p>插件页面中查找内容</p></blockquote><h4 id="示例-17" tabindex="-1"><a class="header-anchor" href="#示例-17" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">findInPage</span><span class="token punctuation">(</span><span class="token string">&#39;utools&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="stopfindinpage-action" tabindex="-1"><a class="header-anchor" href="#stopfindinpage-action" aria-hidden="true">#</a> <code>stopFindInPage(action)</code></h3>',4),P=(0,e._)("p",null,[(0,e._)("code",null,"action"),(0,e.Uk)(" String")],-1),S=(0,e._)("p",null,'"clearSelection" | "keepSelection" | "activateSelection", 默认 "clearSelection"',-1),I=(0,e.Uk)("与 "),F={href:"https://www.electronjs.org/docs/api/web-contents#contentsstopfindinpageaction",target:"_blank",rel:"noopener noreferrer"},U=(0,e.Uk)("Electron API contentsstopfindinpageaction"),D=(0,e.Uk)(" 一致"),C=(0,e.uE)('<blockquote><p>停止插件页面中查找</p></blockquote><h4 id="示例-18" tabindex="-1"><a class="header-anchor" href="#示例-18" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">stopFindInPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="startdrag-file" tabindex="-1"><a class="header-anchor" href="#startdrag-file" aria-hidden="true">#</a> <code>startDrag(file)</code></h3><ul><li><p><code>file</code> String | Array</p><blockquote><p>文件路径 或 文件路径集合</p></blockquote></li></ul><blockquote><p>原生拖拽文件到其他窗口</p></blockquote><h4 id="示例-19" tabindex="-1"><a class="header-anchor" href="#示例-19" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">startDrag</span><span class="token punctuation">(</span><span class="token string">&#39;/path/to/file&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="createbrowserwindow-url-options-callback" tabindex="-1"><a class="header-anchor" href="#createbrowserwindow-url-options-callback" aria-hidden="true">#</a> <code>createBrowserWindow(url, options, callback)</code></h3>',9),E=(0,e._)("li",null,[(0,e._)("p",null,[(0,e._)("code",null,"url"),(0,e.Uk)(" String")]),(0,e._)("blockquote",null,[(0,e._)("p",null,"相对路径的 html 文件")])],-1),W=(0,e._)("p",null,[(0,e._)("code",null,"options"),(0,e.Uk)(" Object")],-1),B=(0,e.Uk)("与 "),O={href:"https://www.electronjs.org/docs/api/browser-window#new-browserwindowoptions",target:"_blank",rel:"noopener noreferrer"},A=(0,e.Uk)("Electron API new BrowserWindow"),T=(0,e.Uk)(" 参数一样，注意：preload 需配置相对位置"),M=(0,e._)("li",null,[(0,e._)("p",null,[(0,e._)("code",null,"callback"),(0,e.Uk)(" Function (可选)")]),(0,e._)("blockquote",null,[(0,e._)("p",null,[(0,e._)("code",null,"url"),(0,e.Uk)(" 加载完成时回调")])])],-1),R=(0,e._)("p",null,[(0,e._)("code",null,"返回"),(0,e.Uk)(" Object")],-1),N=(0,e.Uk)("返回 uTools API 构建的 "),L={href:"https://www.electronjs.org/docs/api/browser-window",target:"_blank",rel:"noopener noreferrer"},V=(0,e.Uk)("BrowserWindow"),H=(0,e.Uk)(" 对象。 "),K=(0,e._)("em",null,"保留了大部分实例方法",-1),J=(0,e.uE)('<blockquote><p>创建浏览器窗口</p></blockquote><h4 id="示例-20" tabindex="-1"><a class="header-anchor" href="#示例-20" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> ubWindow <span class="token operator">=</span> utools<span class="token punctuation">.</span><span class="token function">createBrowserWindow</span><span class="token punctuation">(</span><span class="token string">&#39;test.html&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n  show<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n  title<span class="token operator">:</span> <span class="token string">&#39;测试窗口&#39;</span><span class="token punctuation">,</span>\n  webPreferences<span class="token operator">:</span> <span class="token punctuation">{</span>\n    preload<span class="token operator">:</span> <span class="token string">&#39;preload.js&#39;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 显示</span>\n  ubWindow<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token comment">// 置顶</span>\n  ubWindow<span class="token punctuation">.</span><span class="token function">setAlwaysOnTop</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>\n  <span class="token comment">// 窗口全屏</span>\n  ubWindow<span class="token punctuation">.</span><span class="token function">setFullScreen</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>\n  <span class="token comment">// 向子窗口传递数据</span>\n  ubWindow<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;ping&#39;</span><span class="token punctuation">)</span>\n  <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;electron&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ipcRenderer<span class="token punctuation">.</span><span class="token function">sendTo</span><span class="token punctuation">(</span>ubWindow<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token string">&#39;ping&#39;</span><span class="token punctuation">)</span>\n  <span class="token comment">// 执行脚本</span>\n  ubWindow<span class="token punctuation">.</span><span class="token function">executeJavaScript</span><span class="token punctuation">(</span><span class="token string">&#39;fetch(&quot;https://jsonplaceholder.typicode.com/users/1&quot;).then(resp =&gt; resp.json())&#39;</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// Will be the JSON object from the fetch call</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ubWindow<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 在新建窗口 JavaScript 中接收父窗口传递过来的数据</span>\n<span class="token keyword">const</span> <span class="token punctuation">{</span> ipcRenderer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;electron&#39;</span><span class="token punctuation">)</span>\nipcRenderer<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;ping&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="isdarkcolors" tabindex="-1"><a class="header-anchor" href="#isdarkcolors" aria-hidden="true">#</a> <code>isDarkColors()</code></h3><blockquote><p>是否深色模式</p></blockquote><h4 id="示例-21" tabindex="-1"><a class="header-anchor" href="#示例-21" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">onPluginEnter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>code<span class="token punctuation">,</span> type<span class="token punctuation">,</span> payload<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>className <span class="token operator">=</span> utools<span class="token punctuation">.</span><span class="token function">isDarkColors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&#39;dark-mode&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="动态增减功能" tabindex="-1"><a class="header-anchor" href="#动态增减功能" aria-hidden="true">#</a> 动态增减功能</h2><p>很多时候，插件中会提供一些功能供用户进行个性化设置（例如：<code>网页快开</code>插件），这部分配置无法在 <code>plugin.json</code> 事先定义好，所以我们提供了以下方法对插件功能进行动态增减。</p><h3 id="getfeatures" tabindex="-1"><a class="header-anchor" href="#getfeatures" aria-hidden="true">#</a> <code>getFeatures()</code></h3><ul><li><code>返回</code> Array</li></ul><blockquote><p>返回本插件所有动态增加的功能。</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> features <span class="token operator">=</span> utools<span class="token punctuation">.</span><span class="token function">getFeatures</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>features<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="setfeature-feature" tabindex="-1"><a class="header-anchor" href="#setfeature-feature" aria-hidden="true">#</a> <code>setFeature(feature)</code></h3><ul><li><p><code>feature</code> Object</p><blockquote><p>格式与 <code>plugin.json</code> 中配置的格式一致</p></blockquote><ul><li><code>code</code> String</li><li><code>explain</code> String</li><li><code>icon</code> String (可选)</li><li><code>platform</code> Array (可选)</li><li><code>cmds</code> Array</li></ul></li><li><p><code>返回</code> Boolean</p></li></ul><blockquote><p>为本插件动态新增某个功能。</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">setFeature</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token string">&quot;code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hosts&quot;</span><span class="token punctuation">,</span>\n  <span class="token string">&quot;explain&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hosts切换&quot;</span><span class="token punctuation">,</span>\n  <span class="token comment">// &quot;icon&quot;: &quot;res/xxx.png&quot;,</span>\n  <span class="token comment">// &quot;icon&quot;: &quot;data:image/png;base64,xxx...&quot;,</span>\n  <span class="token comment">// &quot;platform&quot;: [&quot;win32&quot;, &quot;darwin&quot;, &quot;linux&quot;]</span>\n  <span class="token string">&quot;cmds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;hosts&quot;</span><span class="token punctuation">]</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="removefeature-code" tabindex="-1"><a class="header-anchor" href="#removefeature-code" aria-hidden="true">#</a> <code>removeFeature(code)</code></h3><ul><li><code>code</code> String</li><li><code>返回</code> Boolean</li></ul><blockquote><p>动态删除本插件的某个功能。</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">removeFeature</span><span class="token punctuation">(</span><span class="token string">&#39;code&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="用户" tabindex="-1"><a class="header-anchor" href="#用户" aria-hidden="true">#</a> 用户</h2><p>获取当前用户头像、昵称</p><h3 id="getuser" tabindex="-1"><a class="header-anchor" href="#getuser" aria-hidden="true">#</a> <code>getUser()</code></h3><ul><li><p><code>返回</code> Object</p><blockquote><p>{ avatar: String, nickname: String, type: &#39;member&#39; | &#39;user&#39; } | null</p></blockquote></li></ul><blockquote><p>获取当前用户，未登录帐号返回 <code>null</code></p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>utools<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="fetchuserservertemporarytoken" tabindex="-1"><a class="header-anchor" href="#fetchuserservertemporarytoken" aria-hidden="true">#</a> <code>fetchUserServerTemporaryToken()</code></h3><ul><li><p><code>返回</code> Promise</p><blockquote><p>Promise&lt;{ token: string, expired_at: number }&gt;</p></blockquote></li></ul>',30),G=(0,e.Uk)("获取用户服务端临时令牌，用于"),Y=(0,e.Uk)("获取用户基础信息接口"),z=(0,e.uE)('<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">fetchUserServerTemporaryToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ret</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="支付" tabindex="-1"><a class="header-anchor" href="#支付" aria-hidden="true">#</a> 支付</h2><h3 id="openpayment-options-callback" tabindex="-1"><a class="header-anchor" href="#openpayment-options-callback" aria-hidden="true">#</a> <code>openPayment(options, callback)</code></h3><ul><li><p><code>options</code></p><ul><li><p><code>goodsId</code> String</p><blockquote><p>商品 ID，在 “ uTools 开发者工具” 插件中创建</p></blockquote></li><li><p><code>outOrderId</code> String (可选)</p><blockquote><p>第三方服务生成的订单号（6 - 64 字符）</p></blockquote></li><li><p><code>attach</code> String (可选)</p><blockquote><p>第三方服务附加数据，在查询API和支付通知中原样返回，可作为自定义参数使用（最多 256 字符）</p></blockquote></li></ul></li><li><p><code>callback</code></p><blockquote><p>支付成功后回调</p></blockquote></li></ul><blockquote><p>打开支付</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">openPayment</span><span class="token punctuation">(</span><span class="token punctuation">{</span> goodsId<span class="token operator">:</span> <span class="token string">&#39;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 用户完成支付，继续业务代码</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="fetchuserpayments" tabindex="-1"><a class="header-anchor" href="#fetchuserpayments" aria-hidden="true">#</a> <code>fetchUserPayments()</code></h3><ul><li><p><code>返回</code> Promise</p><blockquote><p>Promise&lt;{ order_id: string, out_order_id: string, open_id:string, pay_fee: number, body: string, attach: string, goods_id: string, paid_at: string,created_at }[]&gt;</p></blockquote></li></ul><blockquote><p>获取用户支付记录</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">fetchUserPayments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ret</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 判断如果存在支付记录则继续相关业务</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token doc-comment comment">/**\n  \t    <span class="token punctuation">{</span>\n        &quot;order_id&quot;: &quot;ZsVSwEDoR7PPs6vWdAGplEpEpNjn8xb4&quot;, // utools 订单号\n        &quot;out_order_id&quot;: &quot;&quot;, // 外部订单号\n        &quot;open_id&quot;: &quot;a331127d654761ac91d086b942aae7b6&quot;, uTools 用户 ID, 对于此插件不变且唯一\n        &quot;pay_fee&quot;: 1, // 支付金额（分）\n        &quot;body&quot;: &quot;会员1年&quot;, // 支付内容\n        &quot;attach&quot;: &quot;&quot;, // 附加数据\n        &quot;goods_id&quot;: &quot;6n193s7P95p9gA13786YkwQ5oxHpVW4f&quot;, // 商品 ID\n        &quot;paid_at&quot;: &quot;2021-06-18 16:55:26&quot;, // 支付时间\n        &quot;created_at&quot;: &quot;2021-06-18 16:55:11&quot; // 订单生成时间\n    <span class="token punctuation">}</span>\n  */</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="工具" tabindex="-1"><a class="header-anchor" href="#工具" aria-hidden="true">#</a> 工具</h2><p>屏幕取色 &amp; 屏幕截图</p><h3 id="screencolorpick-callback" tabindex="-1"><a class="header-anchor" href="#screencolorpick-callback" aria-hidden="true">#</a> <code>screenColorPick(callback)</code></h3><ul><li><code>callback</code> Function <blockquote><p>取色结束回调</p></blockquote><ul><li><code>Object</code><ul><li><code>hex</code> String</li><li><code>rgb</code> String</li></ul></li></ul></li></ul><blockquote><p>屏幕取色</p></blockquote><h4 id="示例-22" tabindex="-1"><a class="header-anchor" href="#示例-22" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">screenColorPick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>hex<span class="token punctuation">,</span> rgb<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hex<span class="token punctuation">)</span> <span class="token comment">// #FFFFFF</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rgb<span class="token punctuation">)</span> <span class="token comment">// RGB(0, 0, 0)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="screencapture-callback" tabindex="-1"><a class="header-anchor" href="#screencapture-callback" aria-hidden="true">#</a> <code>screenCapture(callback)</code></h3><ul><li><code>callback</code> Function <blockquote><p>截图结束回调</p></blockquote><ul><li><p><code>String</code></p><blockquote><p>图片的 Base64 字符串</p></blockquote></li></ul></li></ul><blockquote><p>屏幕截图</p></blockquote><h4 id="示例-23" tabindex="-1"><a class="header-anchor" href="#示例-23" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">screenCapture</span><span class="token punctuation">(</span><span class="token parameter">base64Str</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  utools<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&#39;识别图片中文字&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&#39;img&#39;</span><span class="token punctuation">,</span> data<span class="token operator">:</span> base64Str <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="模拟" tabindex="-1"><a class="header-anchor" href="#模拟" aria-hidden="true">#</a> 模拟</h2><p>模拟敲击键盘 和 鼠标点击</p><h3 id="simulatekeyboardtap-key-modifier" tabindex="-1"><a class="header-anchor" href="#simulatekeyboardtap-key-modifier" aria-hidden="true">#</a> <code>simulateKeyboardTap(key, ...modifier)</code></h3><ul><li><p><code>key</code> String</p><blockquote><p>键值</p></blockquote></li><li><p><code>modifier</code> String (可选)</p><blockquote><p>功能键</p></blockquote></li></ul><blockquote><p>模拟键盘按键</p></blockquote><h4 id="示例-24" tabindex="-1"><a class="header-anchor" href="#示例-24" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 模拟键盘敲击 Enter</span>\nutools<span class="token punctuation">.</span><span class="token function">simulateKeyboardTap</span><span class="token punctuation">(</span><span class="token string">&#39;enter&#39;</span><span class="token punctuation">)</span>\n<span class="token comment">// windows linux 模拟粘贴</span>\nutools<span class="token punctuation">.</span><span class="token function">simulateKeyboardTap</span><span class="token punctuation">(</span><span class="token string">&#39;v&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ctrl&#39;</span><span class="token punctuation">)</span>\n<span class="token comment">// macos 模拟粘贴</span>\nutools<span class="token punctuation">.</span><span class="token function">simulateKeyboardTap</span><span class="token punctuation">(</span><span class="token string">&#39;v&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;command&#39;</span><span class="token punctuation">)</span>\n<span class="token comment">// 模拟 Ctrl + Alt + A</span>\nutools<span class="token punctuation">.</span><span class="token function">simulateKeyboardTap</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ctrl&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;alt&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="simulatemousemove-x-y" tabindex="-1"><a class="header-anchor" href="#simulatemousemove-x-y" aria-hidden="true">#</a> <code>simulateMouseMove(x, y)</code></h3><ul><li><code>x</code> Integer</li><li><code>y</code> Integer</li></ul><blockquote><p>模拟鼠标移动</p></blockquote><h4 id="示例-25" tabindex="-1"><a class="header-anchor" href="#示例-25" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">simulateMouseMove</span><span class="token punctuation">(</span><span class="token number">100</span>，<span class="token number">100</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="simulatemouseclick-x-y" tabindex="-1"><a class="header-anchor" href="#simulatemouseclick-x-y" aria-hidden="true">#</a> <code>simulateMouseClick(x, y)</code></h3><ul><li><code>x</code> Integer (可选)</li><li><code>y</code> Integer (可选)</li></ul><blockquote><p>模拟鼠标左键单击</p></blockquote><h4 id="示例-26" tabindex="-1"><a class="header-anchor" href="#示例-26" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">simulateMouseClick</span><span class="token punctuation">(</span><span class="token number">100</span>，<span class="token number">100</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="simulatemouserightclick-x-y" tabindex="-1"><a class="header-anchor" href="#simulatemouserightclick-x-y" aria-hidden="true">#</a> <code>simulateMouseRightClick(x, y)</code></h3><ul><li><code>x</code> Integer (可选)</li><li><code>y</code> Integer (可选)</li></ul><blockquote><p>模拟鼠标右键单击</p></blockquote><h4 id="示例-27" tabindex="-1"><a class="header-anchor" href="#示例-27" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">simulateMouseRightClick</span><span class="token punctuation">(</span><span class="token number">100</span>，<span class="token number">100</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="simulatemousedoubleclick-x-y" tabindex="-1"><a class="header-anchor" href="#simulatemousedoubleclick-x-y" aria-hidden="true">#</a> <code>simulateMouseDoubleClick(x, y)</code></h3><ul><li><code>x</code> Integer (可选)</li><li><code>y</code> Integer (可选)</li></ul><blockquote><p>模拟鼠标双击</p></blockquote><h4 id="示例-28" tabindex="-1"><a class="header-anchor" href="#示例-28" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">simulateMouseDoubleClick</span><span class="token punctuation">(</span><span class="token number">100</span>，<span class="token number">100</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="屏幕" tabindex="-1"><a class="header-anchor" href="#屏幕" aria-hidden="true">#</a> 屏幕</h2><h3 id="getcursorscreenpoint" tabindex="-1"><a class="header-anchor" href="#getcursorscreenpoint" aria-hidden="true">#</a> <code>getCursorScreenPoint()</code></h3><ul><li><p><code>返回</code> Object</p><blockquote><p>{ x: Integer, y: Integer }</p></blockquote></li></ul><blockquote><p>获取鼠标绝对位置</p></blockquote><h4 id="示例-29" tabindex="-1"><a class="header-anchor" href="#示例-29" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> point <span class="token operator">=</span> utools<span class="token punctuation">.</span><span class="token function">getCursorScreenPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>point<span class="token punctuation">.</span>x<span class="token punctuation">,</span> point<span class="token punctuation">.</span>y<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="getprimarydisplay" tabindex="-1"><a class="header-anchor" href="#getprimarydisplay" aria-hidden="true">#</a> <code>getPrimaryDisplay()</code></h3>',56),Q=(0,e._)("p",null,[(0,e._)("code",null,"返回"),(0,e.Uk)(" Object")],-1),Z={href:"https://www.electronjs.org/docs/api/structures/display",target:"_blank",rel:"noopener noreferrer"},X=(0,e.Uk)("Display对象"),$=(0,e.uE)('<blockquote><p>获取主显示器</p></blockquote><h4 id="示例-30" tabindex="-1"><a class="header-anchor" href="#示例-30" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> display <span class="token operator">=</span> utools<span class="token punctuation">.</span><span class="token function">getPrimaryDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>display<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="getalldisplays" tabindex="-1"><a class="header-anchor" href="#getalldisplays" aria-hidden="true">#</a> <code>getAllDisplays()</code></h3>',4),nn=(0,e._)("p",null,[(0,e._)("code",null,"返回"),(0,e.Uk)(" Array")],-1),an={href:"https://www.electronjs.org/docs/api/structures/display",target:"_blank",rel:"noopener noreferrer"},sn=(0,e.Uk)("Display对象"),en=(0,e.Uk)(" 集合"),tn=(0,e.uE)('<blockquote><p>获取所有显示器</p></blockquote><h4 id="示例-31" tabindex="-1"><a class="header-anchor" href="#示例-31" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> displays <span class="token operator">=</span> utools<span class="token punctuation">.</span><span class="token function">getAllDisplays</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>displays<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="getdisplaynearestpoint-point" tabindex="-1"><a class="header-anchor" href="#getdisplaynearestpoint-point" aria-hidden="true">#</a> <code>getDisplayNearestPoint(point)</code></h3>',4),on=(0,e._)("li",null,[(0,e._)("p",null,[(0,e._)("code",null,"point"),(0,e.Uk)(" Object")])],-1),ln=(0,e._)("p",null,[(0,e._)("code",null,"返回"),(0,e.Uk)(" Object")],-1),pn={href:"https://www.electronjs.org/docs/api/structures/display",target:"_blank",rel:"noopener noreferrer"},cn=(0,e.Uk)("Display对象"),un=(0,e.uE)('<blockquote><p>获取位置所在的显示器</p></blockquote><h4 id="示例-32" tabindex="-1"><a class="header-anchor" href="#示例-32" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> display <span class="token operator">=</span> utools<span class="token punctuation">.</span><span class="token function">getDisplayNearestPoint</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>display<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="getdisplaymatching-rect" tabindex="-1"><a class="header-anchor" href="#getdisplaymatching-rect" aria-hidden="true">#</a> <code>getDisplayMatching(rect)</code></h3>',4),rn=(0,e._)("li",null,[(0,e._)("p",null,[(0,e._)("code",null,"rect"),(0,e.Uk)(" Object")])],-1),dn=(0,e._)("p",null,[(0,e._)("code",null,"返回"),(0,e.Uk)(" Object")],-1),kn={href:"https://www.electronjs.org/docs/api/structures/display",target:"_blank",rel:"noopener noreferrer"},bn=(0,e.Uk)("Display对象"),hn=(0,e.uE)('<blockquote><p>获取矩形所在的显示器</p></blockquote><h4 id="示例-33" tabindex="-1"><a class="header-anchor" href="#示例-33" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> display <span class="token operator">=</span> utools<span class="token punctuation">.</span><span class="token function">getDisplayMatching</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> width<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>display<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="复制" tabindex="-1"><a class="header-anchor" href="#复制" aria-hidden="true">#</a> 复制</h2><h3 id="copyfile-file" tabindex="-1"><a class="header-anchor" href="#copyfile-file" aria-hidden="true">#</a> <code>copyFile(file)</code></h3><ul><li><code>file</code> String | Array</li><li><code>返回</code> Boolean</li></ul><blockquote><p>复制文件到系统剪贴板</p></blockquote><h4 id="示例-34" tabindex="-1"><a class="header-anchor" href="#示例-34" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 复制单个文件</span>\nutools<span class="token punctuation">.</span><span class="token function">copyFile</span><span class="token punctuation">(</span><span class="token string">&#39;/path/to/file&#39;</span><span class="token punctuation">)</span>\n<span class="token comment">// 复制多个文件</span>\nutools<span class="token punctuation">.</span><span class="token function">copyFile</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;/path/to/file1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/path/to/file2&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="copyimage-img" tabindex="-1"><a class="header-anchor" href="#copyimage-img" aria-hidden="true">#</a> <code>copyImage(img)</code></h3><ul><li><code>img</code> String | Buffer</li><li><code>返回</code> Boolean</li></ul><blockquote><p>复制图片到系统剪贴板</p></blockquote><h4 id="示例-35" tabindex="-1"><a class="header-anchor" href="#示例-35" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 路径</span>\nutools<span class="token punctuation">.</span><span class="token function">copyImage</span><span class="token punctuation">(</span><span class="token string">&#39;/path/to/img.png&#39;</span><span class="token punctuation">)</span>\n<span class="token comment">// base64</span>\nutools<span class="token punctuation">.</span><span class="token function">copyImage</span><span class="token punctuation">(</span><span class="token string">&#39;data:image/png;base64,xxxxxxxxx&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="copytext-text" tabindex="-1"><a class="header-anchor" href="#copytext-text" aria-hidden="true">#</a> <code>copyText(text)</code></h3><ul><li><code>text</code> String</li><li><code>返回</code> Boolean</li></ul><blockquote><p>复制文本</p></blockquote><h4 id="示例-36" tabindex="-1"><a class="header-anchor" href="#示例-36" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">copyText</span><span class="token punctuation">(</span><span class="token string">&#39;Hi, uTools&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="getcopyedfiles" tabindex="-1"><a class="header-anchor" href="#getcopyedfiles" aria-hidden="true">#</a> <code>getCopyedFiles()</code></h3><ul><li><code>返回</code> Array</li></ul><blockquote><p>获取复制的文件或文件夹</p></blockquote><h4 id="示例-37" tabindex="-1"><a class="header-anchor" href="#示例-37" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">getCopyedFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token comment">// 返回 [{ isFile: true, isDirectory: false, name: &#39;test.png&#39;, path: &#39;/path/to/test.png&#39; }]</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="系统" tabindex="-1"><a class="header-anchor" href="#系统" aria-hidden="true">#</a> 系统</h2><h3 id="shownotification-body-clickfeaturecode" tabindex="-1"><a class="header-anchor" href="#shownotification-body-clickfeaturecode" aria-hidden="true">#</a> <code>showNotification(body, clickFeatureCode)</code></h3><ul><li><p><code>body</code> String</p></li><li><p><code>clickFeatureCode</code> String (可选)</p><blockquote><p>plugin.json 配置的 feature.code，点击通知进入插件功能(该 feature.cmds 至少包含一个搜索字符串关键字)</p></blockquote></li></ul><blockquote><p>显示系统通知</p></blockquote><h4 id="示例-38" tabindex="-1"><a class="header-anchor" href="#示例-38" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">showNotification</span><span class="token punctuation">(</span><span class="token string">&#39;Hi, uTools&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="shellopenpath-fullpath" tabindex="-1"><a class="header-anchor" href="#shellopenpath-fullpath" aria-hidden="true">#</a> <code>shellOpenPath(fullPath)</code></h3><ul><li><code>fullPath</code> String</li></ul><blockquote><p>系统默认方式打开给定的文件</p></blockquote><h4 id="示例-39" tabindex="-1"><a class="header-anchor" href="#示例-39" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">shellOpenPath</span><span class="token punctuation">(</span><span class="token string">&#39;/path/to/file&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="shellshowiteminfolder-fullpath" tabindex="-1"><a class="header-anchor" href="#shellshowiteminfolder-fullpath" aria-hidden="true">#</a> <code>shellShowItemInFolder(fullPath)</code></h3><ul><li><code>fullPath</code> String</li></ul><blockquote><p>系统文件管理器中显示给定的文件</p></blockquote><h4 id="示例-40" tabindex="-1"><a class="header-anchor" href="#示例-40" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">shellShowItemInFolder</span><span class="token punctuation">(</span><span class="token string">&#39;/path/to/file&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="shellopenexternal-url" tabindex="-1"><a class="header-anchor" href="#shellopenexternal-url" aria-hidden="true">#</a> <code>shellOpenExternal(url)</code></h3><ul><li><code>url</code> String</li></ul><blockquote><p>系统默认的协议打开URL</p></blockquote><h4 id="示例-41" tabindex="-1"><a class="header-anchor" href="#示例-41" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 浏览器打开</span>\nutools<span class="token punctuation">.</span><span class="token function">shellOpenExternal</span><span class="token punctuation">(</span><span class="token string">&#39;https://u.tools&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="shellbeep" tabindex="-1"><a class="header-anchor" href="#shellbeep" aria-hidden="true">#</a> <code>shellBeep()</code></h3><blockquote><p>播放哔哔声</p></blockquote><h4 id="示例-42" tabindex="-1"><a class="header-anchor" href="#示例-42" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">shellBeep</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="getnativeid" tabindex="-1"><a class="header-anchor" href="#getnativeid" aria-hidden="true">#</a> <code>getNativeId()</code></h3><ul><li><code>返回</code> String</li></ul><blockquote><p>获取本地 ID</p></blockquote><h4 id="示例-43" tabindex="-1"><a class="header-anchor" href="#示例-43" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 存储只与当前设备相关的信息</span>\n<span class="token keyword">const</span> nativeId <span class="token operator">=</span> utools<span class="token punctuation">.</span><span class="token function">getNativeId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\nutools<span class="token punctuation">.</span>dbStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>nativeId <span class="token operator">+</span> <span class="token string">&#39;/key&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;native value&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="getappversion" tabindex="-1"><a class="header-anchor" href="#getappversion" aria-hidden="true">#</a> <code>getAppVersion()</code></h3><ul><li><code>返回</code> String</li></ul><blockquote><p>获取软件版本</p></blockquote><h4 id="示例-44" tabindex="-1"><a class="header-anchor" href="#示例-44" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>utools<span class="token punctuation">.</span><span class="token function">getAppVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="getpath-name" tabindex="-1"><a class="header-anchor" href="#getpath-name" aria-hidden="true">#</a> <code>getPath(name)</code></h3><ul><li><code>name</code> String <blockquote><p>你可以通过名称请求以下的路径:</p></blockquote><ul><li><code>home</code> 用户的 home 文件夹（主目录）</li><li><code>appData</code> 当前用户的应用数据文件夹，默认对应： <ul><li><code>%APPDATA%</code> Windows 中</li><li><code>~/Library/Application Support</code> macOS 中</li></ul></li><li><code>userData</code> 储存你应用程序设置文件的文件夹，默认是 appData 文件夹附加应用的名称</li><li><code>temp</code> 临时文件夹</li><li><code>exe</code> 当前的可执行文件</li><li><code>desktop</code> 当前用户的桌面文件夹</li><li><code>documents</code> 用户文档目录的路径</li><li><code>downloads</code> 用户下载目录的路径</li><li><code>music</code> 用户音乐目录的路径</li><li><code>pictures</code> 用户图片目录的路径</li><li><code>videos</code> 用户视频目录的路径</li><li><code>logs</code> 应用程序的日志文件夹</li></ul></li><li><code>返回</code> String</li></ul><blockquote><p>获取路径</p></blockquote><h4 id="示例-45" tabindex="-1"><a class="header-anchor" href="#示例-45" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 获取下载路径</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>utools<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token string">&#39;downloads&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="getfileicon-filepath" tabindex="-1"><a class="header-anchor" href="#getfileicon-filepath" aria-hidden="true">#</a> <code>getFileIcon(filePath)</code></h3><ul><li><p><code>filePath</code> String</p><blockquote><p>文件路径、文件扩展名、&quot;folder&quot;</p></blockquote></li><li><p><code>返回</code> String</p></li></ul><blockquote><p>获取文件图标</p></blockquote><h4 id="示例-46" tabindex="-1"><a class="header-anchor" href="#示例-46" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 获取扩展名为 &quot;txt&quot; 的文件图标</span>\nutools<span class="token punctuation">.</span><span class="token function">getFileIcon</span><span class="token punctuation">(</span><span class="token string">&#39;.txt&#39;</span><span class="token punctuation">)</span>\n<span class="token comment">// 获取文件夹图标</span>\nutools<span class="token punctuation">.</span><span class="token function">getFileIcon</span><span class="token punctuation">(</span><span class="token string">&#39;folder&#39;</span><span class="token punctuation">)</span>\n<span class="token comment">// 获取文件图标</span>\nutools<span class="token punctuation">.</span><span class="token function">getFileIcon</span><span class="token punctuation">(</span><span class="token string">&#39;D:\\\\test.url&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="readcurrentfolderpath" tabindex="-1"><a class="header-anchor" href="#readcurrentfolderpath" aria-hidden="true">#</a> <code>readCurrentFolderPath()</code></h3><ul><li><code>返回</code> Promise</li></ul><blockquote><p>读取当前文件管理器窗口路径 (linux 不支持)</p></blockquote><h4 id="示例-47" tabindex="-1"><a class="header-anchor" href="#示例-47" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">readCurrentFolderPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dir</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="readcurrentbrowserurl" tabindex="-1"><a class="header-anchor" href="#readcurrentbrowserurl" aria-hidden="true">#</a> <code>readCurrentBrowserUrl()</code></h3><ul><li><code>返回</code> Promise</li></ul><blockquote><p>读取当前浏览器窗口 URL (linux 不支持)</p></blockquote><blockquote><p>MacOS 支持浏览器 Safari、Chrome、Microsoft Edge、Opera、Vivaldi、Brave</p></blockquote><blockquote><p>Windows 支持浏览器 Chrome、Firefox、Edge、IE、Opera、Brave</p></blockquote><h4 id="示例-48" tabindex="-1"><a class="header-anchor" href="#示例-48" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">readCurrentBrowserUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="isdev" tabindex="-1"><a class="header-anchor" href="#isdev" aria-hidden="true">#</a> <code>isDev()</code></h3><blockquote><p>判断插件是否在开发环境</p></blockquote><h4 id="示例-49" tabindex="-1"><a class="header-anchor" href="#示例-49" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>utools<span class="token punctuation">.</span><span class="token function">isDev</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;coding&#39;</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="ismacos" tabindex="-1"><a class="header-anchor" href="#ismacos" aria-hidden="true">#</a> <code>isMacOs()</code></h3><blockquote><p>是否 MacOS 操作系统</p></blockquote><h4 id="示例-50" tabindex="-1"><a class="header-anchor" href="#示例-50" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>utools<span class="token punctuation">.</span><span class="token function">isMacOs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;mac&#39;</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="iswindows" tabindex="-1"><a class="header-anchor" href="#iswindows" aria-hidden="true">#</a> <code>isWindows()</code></h3><blockquote><p>是否 Windows 操作系统</p></blockquote><h4 id="示例-51" tabindex="-1"><a class="header-anchor" href="#示例-51" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>utools<span class="token punctuation">.</span><span class="token function">isWindows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;windows&#39;</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="islinux" tabindex="-1"><a class="header-anchor" href="#islinux" aria-hidden="true">#</a> <code>isLinux()</code></h3><blockquote><p>是否 Linux 操作系统</p></blockquote><h4 id="示例-52" tabindex="-1"><a class="header-anchor" href="#示例-52" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>utools<span class="token punctuation">.</span><span class="token function">isLinux</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;linux&#39;</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>',97),gn={render:function(n,a){const s=(0,e.up)("OutboundLink"),gn=(0,e.up)("RouterLink");return(0,e.wg)(),(0,e.iD)(e.HY,null,[t,(0,e._)("ul",null,[(0,e._)("li",null,[o,(0,e._)("blockquote",null,[(0,e._)("p",null,[l,(0,e._)("a",p,[c,(0,e.Wm)(s)]),i])])]),u]),r,(0,e._)("ul",null,[(0,e._)("li",null,[d,(0,e._)("blockquote",null,[(0,e._)("p",null,[k,(0,e._)("a",b,[h,(0,e.Wm)(s)]),g])])]),m]),v,(0,e._)("ul",null,[f,(0,e._)("li",null,[x,(0,e._)("blockquote",null,[(0,e._)("p",null,[q,(0,e._)("a",j,[y,(0,e.Wm)(s)]),w])])])]),_,(0,e._)("ul",null,[(0,e._)("li",null,[P,(0,e._)("blockquote",null,[S,(0,e._)("p",null,[I,(0,e._)("a",F,[U,(0,e.Wm)(s)]),D])])])]),C,(0,e._)("ul",null,[E,(0,e._)("li",null,[W,(0,e._)("blockquote",null,[(0,e._)("p",null,[B,(0,e._)("a",O,[A,(0,e.Wm)(s)]),T])])]),M,(0,e._)("li",null,[R,(0,e._)("blockquote",null,[(0,e._)("p",null,[N,(0,e._)("a",L,[V,(0,e.Wm)(s)]),H,K])])])]),J,(0,e._)("blockquote",null,[(0,e._)("p",null,[G,(0,e.Wm)(gn,{to:"/developer/server-api.html#%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E5%9F%BA%E7%A1%80%E4%BF%A1%E6%81%AF%E6%8E%A5%E5%8F%A3"},{default:(0,e.w5)((()=>[Y])),_:1})])]),z,(0,e._)("ul",null,[(0,e._)("li",null,[Q,(0,e._)("blockquote",null,[(0,e._)("p",null,[(0,e._)("a",Z,[X,(0,e.Wm)(s)])])])])]),$,(0,e._)("ul",null,[(0,e._)("li",null,[nn,(0,e._)("blockquote",null,[(0,e._)("p",null,[(0,e._)("a",an,[sn,(0,e.Wm)(s)]),en])])])]),tn,(0,e._)("ul",null,[on,(0,e._)("li",null,[ln,(0,e._)("blockquote",null,[(0,e._)("p",null,[(0,e._)("a",pn,[cn,(0,e.Wm)(s)])])])])]),un,(0,e._)("ul",null,[rn,(0,e._)("li",null,[dn,(0,e._)("blockquote",null,[(0,e._)("p",null,[(0,e._)("a",kn,[bn,(0,e.Wm)(s)])])])])]),hn],64)}}}}]);