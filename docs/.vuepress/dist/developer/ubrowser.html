<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.25">
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?91d2fe9d2e05a231f56ec4400d1dcd84";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
</script><title>ubrowser API | uTools</title><meta name="description" content="uTools是一个极简、插件化、跨平台的现代化桌面软件。通过自由选配丰富的插件，打造你得心应手的工具平台。">
    <link rel="preload" href="/docs/assets/js/runtime~app.40581612.js" as="script"><link rel="preload" href="/docs/assets/css/styles.fbc0f1d1.css" as="style"><link rel="preload" href="/docs/assets/js/567.99b38430.js" as="script"><link rel="preload" href="/docs/assets/js/app.337dc86d.js" as="script">
    <link rel="stylesheet" href="/docs/assets/css/styles.fbc0f1d1.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/docs/guide/about-uTools.html" class=""><img class="logo" src="https://res.u-tools.cn/website/logo.png" alt="uTools"><span class="site-name can-hide">uTools</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/docs/guide/about-uTools" class="nav-link" aria-label="使用指南"><!--[--><!--]--> 使用指南 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/docs/developer/welcome" class="nav-link router-link-active" aria-label="插件开发"><!--[--><!--]--> 插件开发 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://u.tools" rel="noopener noreferrer" target="_blank" aria-label="uTools 官网"><!--[--><!--]--> uTools 官网 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://yuanliao.info" rel="noopener noreferrer" target="_blank" aria-label="社区"><!--[--><!--]--> 社区 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索, 快捷键 「s」" autocomplete="off" spellcheck="false" value><!----></form></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/docs/guide/about-uTools" class="nav-link" aria-label="使用指南"><!--[--><!--]--> 使用指南 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/docs/developer/welcome" class="nav-link router-link-active" aria-label="插件开发"><!--[--><!--]--> 插件开发 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://u.tools" rel="noopener noreferrer" target="_blank" aria-label="uTools 官网"><!--[--><!--]--> uTools 官网 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://yuanliao.info" rel="noopener noreferrer" target="_blank" aria-label="社区"><!--[--><!--]--> 社区 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item active">插件开发</p><ul class=""><li><!--[--><a href="/docs/developer/welcome.html" class="nav-link sidebar-item" aria-label="快速上手"><!--[--><!--]--> 快速上手 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/developer/config.html" class="nav-link sidebar-item" aria-label="完整配置"><!--[--><!--]--> 完整配置 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/developer/preload.html" class="nav-link sidebar-item" aria-label="preload.js"><!--[--><!--]--> preload.js <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/developer/template.html" class="nav-link sidebar-item" aria-label="模板插件"><!--[--><!--]--> 模板插件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/developer/api.html" class="nav-link sidebar-item" aria-label="uTools API"><!--[--><!--]--> uTools API <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/developer/db.html" class="nav-link sidebar-item" aria-label="uTools DB API"><!--[--><!--]--> uTools DB API <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/docs/developer/ubrowser.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="ubrowser API"><!--[--><!--]--> ubrowser API <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/docs/developer/ubrowser.html#api-列表" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="API 列表"><!--[--><!--]--> API 列表 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/docs/developer/ubrowser.html#ubrowser-管理" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ubrowser 管理"><!--[--><!--]--> ubrowser 管理 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/docs/developer/server-api.html" class="nav-link sidebar-item" aria-label="uTools Server API"><!--[--><!--]--> uTools Server API <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/developer/best.html" class="nav-link sidebar-item" aria-label="注意事项"><!--[--><!--]--> 注意事项 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="ubrowser-api" tabindex="-1"><a class="header-anchor" href="#ubrowser-api" aria-hidden="true">#</a> ubrowser API</h1><p>uTools browser 简称 ubrowser，是根据 uTools 的特性，量身打造的一个可编程浏览器。利用 ubrowser 可以轻而易举连接一切互联网服务，且与 uTools 完美结合。</p><p>ubrowser 拥有优雅的链式调用接口，可以用口语化的数行代码，实现一系列匪夷所思的操作。例如：</p><p>1、自动化测试（自动打开页面、点击、判断，彻底解放测试人员。）</p><p>2、自动抢票</p><p>3、自动去除搜索引擎广告</p><p>4、自动将选中的文字、图片保存到各类云笔记</p><p>基本 demo：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 打开&quot;必应&quot; 并搜索 &quot;uTools&quot;</span>
utools<span class="token punctuation">.</span>ubrowser<span class="token punctuation">.</span><span class="token function">goto</span><span class="token punctuation">(</span><span class="token string">&#39;https://cn.bing.com&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token string">&#39;#sb_form_q&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;uTools&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">&#39;#sb_form_go&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token number">600</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="api-列表" tabindex="-1"><a class="header-anchor" href="#api-列表" aria-hidden="true">#</a> API 列表</h2><h3 id="useragent-useragent" tabindex="-1"><a class="header-anchor" href="#useragent-useragent" aria-hidden="true">#</a> <code>useragent(userAgent)</code></h3><ul><li><code>userAgent</code> String</li></ul><blockquote><p>设置 User-Agent</p></blockquote><h3 id="goto-url-headers" tabindex="-1"><a class="header-anchor" href="#goto-url-headers" aria-hidden="true">#</a> <code>goto(url, headers)</code></h3><ul><li><p><code>url</code> String</p></li><li><p><code>headers</code> Object (可选)</p><blockquote><p>{ Referer: string, userAgent: string }</p></blockquote></li></ul><blockquote><p>前往</p></blockquote><h3 id="goto-mdtext-title" tabindex="-1"><a class="header-anchor" href="#goto-mdtext-title" aria-hidden="true">#</a> <code>goto(mdText, title)</code></h3><ul><li><p><code>mdText</code> String</p><blockquote><p>Markdown 文本</p></blockquote></li><li><p><code>title</code> String (可选)</p><blockquote><p>窗口标题</p></blockquote></li></ul><blockquote><p>Markdown 转 Html 并显示</p></blockquote><h3 id="viewport-width-height" tabindex="-1"><a class="header-anchor" href="#viewport-width-height" aria-hidden="true">#</a> <code>viewport(width, height)</code></h3><ul><li><code>width</code> Integer</li><li><code>height</code> Integer</li></ul><blockquote><p>页面大小</p></blockquote><h3 id="hide" tabindex="-1"><a class="header-anchor" href="#hide" aria-hidden="true">#</a> <code>hide()</code></h3><blockquote><p>隐藏 ubrowser 窗口</p></blockquote><h3 id="show" tabindex="-1"><a class="header-anchor" href="#show" aria-hidden="true">#</a> <code>show()</code></h3><blockquote><p>显示 ubrowser 窗口</p></blockquote><h3 id="css-csscode" tabindex="-1"><a class="header-anchor" href="#css-csscode" aria-hidden="true">#</a> <code>css(cssCode)</code></h3><ul><li><code>cssCode</code> String</li></ul><blockquote><p>注入样式</p></blockquote><h3 id="press-key-modifier" tabindex="-1"><a class="header-anchor" href="#press-key-modifier" aria-hidden="true">#</a> <code>press(key, ...modifier)</code></h3><ul><li><p><code>key</code> String</p></li><li><p><code>modifier</code> String (可选)</p><blockquote><p>control | ctrl | shift | meta | alt | command | cmd</p></blockquote></li></ul><blockquote><p>键盘按键</p></blockquote><h3 id="paste-text" tabindex="-1"><a class="header-anchor" href="#paste-text" aria-hidden="true">#</a> <code>paste(text)</code></h3><ul><li><p><code>text</code> String (可选)</p><blockquote><p>文本字符串 | 图片 base64</p></blockquote></li></ul><blockquote><p>执行粘贴</p></blockquote><h3 id="screenshot-arg-savepath" tabindex="-1"><a class="header-anchor" href="#screenshot-arg-savepath" aria-hidden="true">#</a> <code>screenshot(arg, savePath)</code></h3><ul><li><code>arg</code> String | Object (可选)</li></ul><blockquote><p>String - 要截取的 DOM 元素</p></blockquote><blockquote><p>Object - 截图位置和大小 { x: Integer, y: Integer, width: Integer, height: Integer }</p></blockquote><blockquote><p>为空 截取整个窗口</p></blockquote><ul><li><p><code>savePath</code> String (可选)</p><blockquote><p>图片保存路径,，也可以是完整PNG文件路径（默认存储在临时目录）</p></blockquote></li></ul><blockquote><p>部分网页截图</p></blockquote><h3 id="pdf-options-savepath" tabindex="-1"><a class="header-anchor" href="#pdf-options-savepath" aria-hidden="true">#</a> <code>pdf(options, savePath)</code></h3><ul><li><p><code>options</code> Object (可选)</p><blockquote><p>{ marginsType: 0 | 1 | 2, pageSize: (&#39;A3&#39; | &#39;A4&#39; | &#39;A5&#39; | &#39;Legal&#39; | &#39;Letter&#39; | &#39;Tabloid&#39;) | { width: Integer, height: Integer } }</p><p>与 <a href="https://www.electronjs.org/docs/api/web-contents#contentsprinttopdfoptions" target="_blank" rel="noopener noreferrer">Electron API<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> 一致</p></blockquote></li><li><p><code>savePath</code> String (可选)</p><blockquote><p>图片保存路径，也可以是完整pdf文件路径（默认存储在临时目录）</p></blockquote></li></ul><blockquote><p>保存页面为PDF</p></blockquote><h3 id="device-arg" tabindex="-1"><a class="header-anchor" href="#device-arg" aria-hidden="true">#</a> <code>device(arg)</code></h3><ul><li><p><code>arg</code> String | Object</p><blockquote><p>String - &#39;iPhone 11&#39; | &#39;iPhone X&#39; | &#39;iPad&#39; | &#39;iPhone 6/7/8 Plus&#39; | &#39;iPhone 6/7/8&#39; | &#39;iPhone 5/SE&#39; | &#39;HUAWEI Mate10&#39; | &#39;HUAWEI Mate20&#39; | &#39;HUAWEI Mate30&#39; | &#39;HUAWEI Mate30 Pro&#39;</p></blockquote><blockquote><p>Object - { size: { width: Integer, height: Integer }, useragent: String }</p></blockquote></li></ul><blockquote><p>模拟设备</p></blockquote><h3 id="cookies-name" tabindex="-1"><a class="header-anchor" href="#cookies-name" aria-hidden="true">#</a> <code>cookies(name)</code></h3><ul><li><code>name</code> String (可选)</li></ul><blockquote><p>为空获取全部 cookie 获取cookie</p></blockquote><h3 id="setcookies-name-value" tabindex="-1"><a class="header-anchor" href="#setcookies-name-value" aria-hidden="true">#</a> <code>setCookies(name, value)</code></h3><ul><li><code>name</code> String</li><li><code>value</code> String</li></ul><blockquote><p>设置 cookie</p></blockquote><h3 id="setcookies-cookies" tabindex="-1"><a class="header-anchor" href="#setcookies-cookies" aria-hidden="true">#</a> <code>setCookies(cookies)</code></h3><ul><li><p><code>cookies</code> Array</p><blockquote><p>[{ name: String, value: String }, { name: String1, value: String1 }]</p></blockquote></li></ul><blockquote><p>设置 cookie</p></blockquote><h3 id="removecookies-name" tabindex="-1"><a class="header-anchor" href="#removecookies-name" aria-hidden="true">#</a> <code>removeCookies(name)</code></h3><ul><li><code>name</code> String</li></ul><blockquote><p>删除 cookie</p></blockquote><h3 id="clearcookies-url" tabindex="-1"><a class="header-anchor" href="#clearcookies-url" aria-hidden="true">#</a> <code>clearCookies(url)</code></h3><ul><li><p><code>url</code> String (可选)</p><blockquote><p>如果在执行&quot;goto&quot;前执行 url 参数必需</p></blockquote></li></ul><blockquote><p>清空 cookie</p></blockquote><h3 id="devtools-mode" tabindex="-1"><a class="header-anchor" href="#devtools-mode" aria-hidden="true">#</a> <code>devTools(mode)</code></h3><ul><li><p><code>mode</code> String (可选)</p><blockquote><p>&#39;right&#39; | &#39;bottom&#39; | &#39;undocked&#39; | &#39;detach&#39; 默认为 &#39;detach&#39;</p></blockquote></li></ul><blockquote><p>打开开发者工具</p></blockquote><h3 id="evaluate-func-params" tabindex="-1"><a class="header-anchor" href="#evaluate-func-params" aria-hidden="true">#</a> <code>evaluate(func, ...params)</code></h3><ul><li><p><code>func</code> Function</p><blockquote><p>在网页内执行的函数</p></blockquote></li><li><p><code>param</code> Any (可选)</p><blockquote><p>传递给 func 的参数</p></blockquote></li></ul><blockquote><p>执行 JS 函数，如果有返回值将加入到返回结果中</p></blockquote><h4 id="示例" tabindex="-1"><a class="header-anchor" href="#示例" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">param1<span class="token punctuation">,</span> param2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#39;param1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;param2&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="wait-ms" tabindex="-1"><a class="header-anchor" href="#wait-ms" aria-hidden="true">#</a> <code>wait(ms)</code></h3><ul><li><p><code>ms</code> Integer</p><blockquote><p>等待的毫秒数</p></blockquote></li></ul><blockquote><p>等待</p></blockquote><h3 id="wait-selector-timeout" tabindex="-1"><a class="header-anchor" href="#wait-selector-timeout" aria-hidden="true">#</a> <code>wait(selector, timeout)</code></h3><ul><li><p><code>selector</code> String</p><blockquote><p>DOM 元素</p></blockquote></li><li><p><code>timeout</code> Integer (可选)</p><blockquote><p>超时 默认 10000 ms</p></blockquote></li></ul><blockquote><p>等待 DOM 元素出现</p></blockquote><h3 id="wait-func-timeout-params" tabindex="-1"><a class="header-anchor" href="#wait-func-timeout-params" aria-hidden="true">#</a> <code>wait(func, timeout，...params)</code></h3><ul><li><p><code>func</code> Function</p><blockquote><p>在网页内执行的函数，返回 true 结束等待</p></blockquote></li><li><p><code>timeout</code> Integer (可选)</p><blockquote><p>超时 默认 10000 ms</p></blockquote></li><li><p><code>param</code> Any (可选)</p><blockquote><p>传递给 func 的参数</p></blockquote></li></ul><blockquote><p>等待JS函数执行返回 true</p></blockquote><h3 id="when-selector" tabindex="-1"><a class="header-anchor" href="#when-selector" aria-hidden="true">#</a> <code>when(selector)</code></h3><ul><li><p><code>selector</code> String</p><blockquote><p>DOM 元素</p></blockquote></li></ul><blockquote><p>当元素存在时执行直到碰到 end() 方法</p></blockquote><h3 id="when-func-params" tabindex="-1"><a class="header-anchor" href="#when-func-params" aria-hidden="true">#</a> <code>when(func, ...params)</code></h3><ul><li><p><code>func</code> Function</p><blockquote><p>在网页内执行的函数，返回 true 执行</p></blockquote></li><li><p><code>param</code> Any (可选)</p><blockquote><p>传递给 func 的参数</p></blockquote></li></ul><blockquote><p>当 JS 函数执行返回 true 时执行, 直到碰到 end() 方法</p></blockquote><h3 id="end" tabindex="-1"><a class="header-anchor" href="#end" aria-hidden="true">#</a> <code>end()</code></h3><blockquote><p>与 when 配套使用</p></blockquote><h3 id="click-selector" tabindex="-1"><a class="header-anchor" href="#click-selector" aria-hidden="true">#</a> <code>click(selector)</code></h3><ul><li><code>selector</code> String</li></ul><blockquote><p>单击元素</p></blockquote><h3 id="mousedown-selector" tabindex="-1"><a class="header-anchor" href="#mousedown-selector" aria-hidden="true">#</a> <code>mousedown(selector)</code></h3><ul><li><code>selector</code> String</li></ul><blockquote><p>元素触发按下鼠标左键</p></blockquote><h3 id="mouseup-selector" tabindex="-1"><a class="header-anchor" href="#mouseup-selector" aria-hidden="true">#</a> <code>mouseup(selector)</code></h3><ul><li><code>selector</code> String</li></ul><blockquote><p>元素触发释放鼠标左键</p></blockquote><h3 id="file-selector-payload" tabindex="-1"><a class="header-anchor" href="#file-selector-payload" aria-hidden="true">#</a> <code>file(selector, payload)</code></h3><ul><li><p><code>selector</code> String</p><blockquote><p>input type=&#39;file&#39; 元素</p></blockquote></li><li><p><code>payload</code> String | Array | Buffer</p><blockquote><p>文件路径 或 路径集合 或 文件 Buffer</p></blockquote></li></ul><blockquote><p>为网页中的 file input 赋值</p></blockquote><h3 id="value-selector-val" tabindex="-1"><a class="header-anchor" href="#value-selector-val" aria-hidden="true">#</a> <code>value(selector, val)</code></h3><ul><li><p><code>selector</code> String</p><blockquote><p>input textarea select 元素</p></blockquote></li><li><p><code>val</code> String</p></li></ul><blockquote><p>为网页中的 input textarea select 元素赋值</p></blockquote><h3 id="check-selector-checked" tabindex="-1"><a class="header-anchor" href="#check-selector-checked" aria-hidden="true">#</a> <code>check(selector, checked)</code></h3><ul><li><p><code>selector</code> String</p><blockquote><p>checkbox radio 元素</p></blockquote></li><li><p><code>checked</code> Boolean</p><blockquote><p>是否选中</p></blockquote></li></ul><blockquote><p>checkbox radio 元素选中或取消选中</p></blockquote><h3 id="focus-selector" tabindex="-1"><a class="header-anchor" href="#focus-selector" aria-hidden="true">#</a> <code>focus(selector)</code></h3><ul><li><code>selector</code> String</li></ul><blockquote><p>元素获得焦点</p></blockquote><h3 id="scroll-selector" tabindex="-1"><a class="header-anchor" href="#scroll-selector" aria-hidden="true">#</a> <code>scroll(selector)</code></h3><ul><li><code>selector</code> String</li></ul><blockquote><p>滚动到元素位置</p></blockquote><h3 id="scroll-y" tabindex="-1"><a class="header-anchor" href="#scroll-y" aria-hidden="true">#</a> <code>scroll(y)</code></h3><ul><li><code>y</code> Integer</li></ul><blockquote><p>Y轴滚动</p></blockquote><h3 id="scroll-x-y" tabindex="-1"><a class="header-anchor" href="#scroll-x-y" aria-hidden="true">#</a> <code>scroll(x, y)</code></h3><ul><li><code>x</code> Integer</li><li><code>y</code> Integer</li></ul><blockquote><p>X轴和Y轴滚动</p></blockquote><h3 id="run-ubrowserid" tabindex="-1"><a class="header-anchor" href="#run-ubrowserid" aria-hidden="true">#</a> <code>run(ubrowserId)</code></h3><ul><li><p><code>ubrowserId</code> Integer</p><blockquote><p>utools.getIdleUBrowsers() 中获得</p></blockquote></li><li><p><code>返回</code> Promise</p></li></ul><blockquote><p>运行在闲置的 ubrowser 上</p></blockquote><h3 id="run-options" tabindex="-1"><a class="header-anchor" href="#run-options" aria-hidden="true">#</a> <code>run(options)</code></h3><ul><li><p><code>options</code> Object</p><ul><li><code>Object</code><ul><li>show Boolean (可选) 是否显示</li><li>width Integer (可选) 宽度 默认为 800</li><li>height Integer (可选) 高度 默认为 600</li><li>x Integer (可选) 位置 X</li><li>y Integer (可选) 位置 Y</li><li>center Boolean (可选) 窗口在屏幕居中</li><li>minWidth Integer (可选) 窗口的最小宽度。默认值为 0</li><li>minHeight Integer (可选) 窗口的最小高度。默认值为 0</li><li>maxWidth Integer (可选) 窗口的最大宽度。默认无限制</li><li>maxHeight Integer (可选) 窗口的最大高度。默认无限制</li><li>resizable Boolean (可选) 窗口是否可以改变尺寸。默认值为 true</li><li>movable Boolean (可选) 窗口是否可以移动，在 Linux 中无效。默认值为 true</li><li>minimizable Boolean (可选) 窗口是否可以最小化，在 Linux 中无效。默认值为 true</li><li>maximizable Boolean (可选) 窗口是否可以最大化动，在 Linux 中无效。默认值为 true</li><li>alwaysOnTop Boolean (可选) 窗口是否永远置顶。默认值为 false</li><li>fullscreen Boolean (可选) 窗口是否全屏。默认值为 false</li><li>fullscreenable Boolean (可选) 窗口是否可以进入全屏状态。默认值为 true</li><li>enableLargerThanScreen Boolean (可选) 是否允许改变窗口的大小使之大于屏幕的尺寸，仅适用于 macOS，因为其它操作系统默认允许 大于屏幕的窗口。 默认值为 false</li><li>opacity Number (可选) 设置窗口初始的不透明度，介于 0.0 (完全透明) 和 1.0 (完全不透明) 之间。仅支持 Windows 和 macOS 。</li></ul></li></ul></li><li><p><code>返回</code> Promise</p></li></ul><blockquote><p>启动一个 ubrowser 运行</p></blockquote><h2 id="ubrowser-管理" tabindex="-1"><a class="header-anchor" href="#ubrowser-管理" aria-hidden="true">#</a> ubrowser 管理</h2><h3 id="getidleubrowsers" tabindex="-1"><a class="header-anchor" href="#getidleubrowsers" aria-hidden="true">#</a> <code>getIdleUBrowsers()</code></h3><ul><li><code>返回</code> Array</li></ul><blockquote><p>获取闲置的 ubrowser</p></blockquote><h4 id="示例-1" tabindex="-1"><a class="header-anchor" href="#示例-1" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>utools<span class="token punctuation">.</span><span class="token function">getIdleUBrowsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// [{ id: number, title: string, url: string }]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="setubrowserproxy-config" tabindex="-1"><a class="header-anchor" href="#setubrowserproxy-config" aria-hidden="true">#</a> <code>setUBrowserProxy(config)</code></h3><ul><li><p><code>config</code> Object</p><blockquote><p>与 <a href="https://www.electronjs.org/docs/api/session#sessetproxyconfig" target="_blank" rel="noopener noreferrer">Electron API<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> 一致</p></blockquote></li><li><p><code>返回</code> Boolean</p></li></ul><blockquote><p>设置 ubrowser 代理</p></blockquote><h4 id="示例-2" tabindex="-1"><a class="header-anchor" href="#示例-2" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">setUBrowserProxy</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  proxyRules<span class="token operator">:</span> <span class="token string">&#39;http=foopy:80;ftp=foopy2&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="clearubrowsercache" tabindex="-1"><a class="header-anchor" href="#clearubrowsercache" aria-hidden="true">#</a> <code>clearUBrowserCache()</code></h3><ul><li><code>返回</code> Boolean</li></ul><blockquote><p>清空 ubrowser 缓存</p></blockquote><h4 id="示例-3" tabindex="-1"><a class="header-anchor" href="#示例-3" aria-hidden="true">#</a> 示例</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>utools<span class="token punctuation">.</span><span class="token function">clearUBrowserCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/docs/developer/db.html" class="nav-link" aria-label="uTools DB API"><!--[--><!--]--> uTools DB API <!--[--><!--]--></a></span><span class="next"><a href="/docs/developer/server-api.html" class="nav-link" aria-label="uTools Server API"><!--[--><!--]--> uTools Server API <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/docs/assets/js/runtime~app.40581612.js" defer></script><script src="/docs/assets/js/567.99b38430.js" defer></script><script src="/docs/assets/js/app.337dc86d.js" defer></script>
  </body>
</html>
